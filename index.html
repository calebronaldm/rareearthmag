<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NdFeB Manufacturing Feasibility Analysis - India EV Context</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            padding: 30px 0;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .header h1 {
            font-size: 2.5em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.1em;
            color: #b0b0b0;
        }
        
        .nav-tabs {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
        }
        
        .nav-tab {
            padding: 12px 25px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 50px;
            color: #e0e0e0;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95em;
            font-weight: 500;
        }
        
        .nav-tab:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .nav-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .card-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #ffffff;
        }
        
        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
        }
        
        .metric-value {
            font-size: 2.5em;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 10px 0;
        }
        
        .metric-label {
            color: #b0b0b0;
            font-size: 0.9em;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 20px;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #e0e0e0;
            font-weight: 500;
        }
        
        .input-group input,
        .input-group select {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: #e0e0e0;
            font-size: 1em;
            transition: all 0.3s ease;
        }
        
        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: #667eea;
            background: rgba(255, 255, 255, 0.15);
        }
        
        .btn {
            padding: 12px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 50px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1em;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .slider-container {
            margin: 20px 0;
        }
        
        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.2);
            outline: none;
            -webkit-appearance: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            cursor: pointer;
        }
        
        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            cursor: pointer;
        }
        
        .analysis-result {
            background: rgba(102, 126, 234, 0.1);
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 15px 0;
            border-radius: 10px;
        }
        
        .risk-indicator {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
            margin: 5px;
        }
        
        .risk-low { background: rgba(76, 175, 80, 0.2); color: #4caf50; }
        .risk-medium { background: rgba(255, 193, 7, 0.2); color: #ffc107; }
        .risk-high { background: rgba(244, 67, 54, 0.2); color: #f44336; }
        
        .progress-bar {
            width: 100%;
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .data-table th,
        .data-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .data-table th {
            background: rgba(255, 255, 255, 0.05);
            font-weight: 600;
            color: #ffffff;
        }
        
        .data-table tr:hover {
            background: rgba(255, 255, 255, 0.03);
        }
        
        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 10px;
            border-radius: 8px;
            font-size: 0.9em;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1000;
        }
        
        .tooltip.active {
            opacity: 1;
        }
        
        @media (max-width: 768px) {
            .header h1 { font-size: 2em; }
            .dashboard-grid { grid-template-columns: 1fr; }
            .nav-tabs { justify-content: flex-start; overflow-x: auto; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>NdFeB Manufacturing Feasibility Analysis</h1>
            <p>Advanced AI-Powered Analysis Tool for Rare Earth Magnet Manufacturing in India</p>
            <p style="font-size: 0.9em; margin-top: 10px; color: #888;">Electric Vehicle Industry Context & Future Prospects</p>
        </div>
        
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('overview')">Overview</button>
            <button class="nav-tab" onclick="showTab('market')">Market Analysis</button>
            <button class="nav-tab" onclick="showTab('supply')">Supply Chain</button>
            <button class="nav-tab" onclick="showTab('financial')">Financial Model</button>
            <button class="nav-tab" onclick="showTab('scenario')">Scenario Analysis</button>
            <button class="nav-tab" onclick="showTab('risk')">Risk Assessment</button>
            <button class="nav-tab" onclick="showTab('environment')">Environmental Impact</button>
            <button class="nav-tab" onclick="showTab('policy')">Policy Framework</button>
            <button class="nav-tab" onclick="showTab('forecast')">Future Forecast</button>
        </div>
        
        <!-- Overview Tab -->
        <div id="overview" class="tab-content active">
            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Global NdFeB Market Size</h3>
                        <div class="card-icon" style="background: rgba(102, 126, 234, 0.2);">üåç</div>
                    </div>
                    <div class="metric-value">$18.7B</div>
                    <div class="metric-label">2024 Market Value</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 75%;"></div>
                    </div>
                    <p style="font-size: 0.9em; color: #b0b0b0;">CAGR: 8.3% (2024-2030)</p>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">India EV Market Projection</h3>
                        <div class="card-icon" style="background: rgba(76, 175, 80, 0.2);">üöó</div>
                    </div>
                    <div class="metric-value">10.5M</div>
                    <div class="metric-label">Units by 2030</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 60%;"></div>
                    </div>
                    <p style="font-size: 0.9em; color: #b0b0b0;">Current: 1.3M units (2024)</p>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">NdFeB Demand (India)</h3>
                        <div class="card-icon" style="background: rgba(255, 193, 7, 0.2);">üìä</div>
                    </div>
                    <div class="metric-value">12,500</div>
                    <div class="metric-label">Tons/Year (2024)</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 45%;"></div>
                    </div>
                    <p style="font-size: 0.9em; color: #b0b0b0;">Projected: 45,000 tons by 2030</p>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Import Dependency</h3>
                        <div class="card-icon" style="background: rgba(244, 67, 54, 0.2);">üìâ</div>
                    </div>
                    <div class="metric-value">92%</div>
                    <div class="metric-label">Current Import Rate</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 92%; background: linear-gradient(90deg, #f44336 0%, #ff5722 100%);"></div>
                    </div>
                    <p style="font-size: 0.9em; color: #b0b0b0;">Major Source: China (85%)</p>
                </div>
            </div>
            
            <div class="card">
                <h3 class="card-title">Executive Summary</h3>
                <div class="analysis-result">
                    <h4>Key Findings:</h4>
                    <ul style="margin-left: 20px; line-height: 1.8;">
                        <li>India's EV market is experiencing rapid growth with government support through FAME II and PLI schemes</li>
                        <li>Current NdFeB manufacturing capacity in India is minimal (~8% of demand)</li>
                        <li>Setting up integrated NdFeB manufacturing requires investment of ‚Çπ800-1200 Cr for 5000 TPA capacity</li>
                        <li>Break-even period: 5-7 years with government incentives</li>
                        <li>Critical success factors: Raw material security, technology partnerships, and skilled workforce</li>
                    </ul>
                </div>
                
                <div class="chart-container">
                    <canvas id="overviewChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Market Analysis Tab -->
        <div id="market" class="tab-content">
            <div class="dashboard-grid">
                <div class="card">
                    <h3 class="card-title">Market Segmentation Analysis</h3>
                    <div class="chart-container">
                        <canvas id="marketSegmentChart"></canvas>
                    </div>
                </div>
                
                <div class="card">
                    <h3 class="card-title">Competitive Landscape</h3>
                    <div class="chart-container">
                        <canvas id="competitiveChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h3 class="card-title">Market Dynamics Simulator</h3>
                <div class="input-group">
                    <label>EV Growth Rate (%/year)</label>
                    <input type="range" class="slider" id="evGrowthRate" min="10" max="50" value="25" oninput="updateMarketAnalysis()">
                    <span id="evGrowthValue">25%</span>
                </div>
                
                <div class="input-group">
                    <label>Government Subsidy Level</label>
                    <select id="subsidyLevel" onchange="updateMarketAnalysis()">
                        <option value="low">Low (5-10%)</option>
                        <option value="medium" selected>Medium (15-20%)</option>
                        <option value="high">High (25-30%)</option>
                    </select>
                </div>
                
                <div class="analysis-result" id="marketAnalysisResult">
                    <h4>Market Opportunity Score: <span style="color: #4caf50;">8.2/10</span></h4>
                    <p>Based on current parameters, the Indian NdFeB market presents a strong opportunity with projected demand of 35,000 tons by 2028.</p>
                </div>
                
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>2024</th>
                            <th>2026</th>
                            <th>2028</th>
                            <th>2030</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>EV Units (Million)</td>
                            <td>1.3</td>
                            <td>3.2</td>
                            <td>6.1</td>
                            <td>10.5</td>
                        </tr>
                        <tr>
                            <td>NdFeB Demand (Tons)</td>
                            <td>12,500</td>
                            <td>22,000</td>
                            <td>35,000</td>
                            <td>45,000</td>
                        </tr>
                        <tr>
                            <td>Market Value (‚Çπ Cr)</td>
                            <td>3,750</td>
                            <td>6,600</td>
                            <td>10,500</td>
                            <td>13,500</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Supply Chain Tab -->
        <div id="supply" class="tab-content">
            <div class="card">
                <h3 class="card-title">Supply Chain Network Analysis</h3>
                <div class="chart-container">
                    <canvas id="supplyChainChart"></canvas>
                </div>
            </div>
            
            <div class="dashboard-grid">
                <div class="card">
                    <h3 class="card-title">Raw Material Sources</h3>
                    <div class="analysis-result">
                        <h4>Critical Materials:</h4>
                        <ul style="margin-left: 20px;">
                            <li>Neodymium (Nd): 31-33% - Import from Australia, China</li>
                            <li>Iron (Fe): 64-68% - Domestic availability</li>
                            <li>Boron (B): 1.0-1.2% - Import from Turkey, USA</li>
                            <li>Dysprosium (Dy): 0-5% - Import from China</li>
                        </ul>
                    </div>
                    <div class="risk-indicator risk-high">High Import Dependency</div>
                </div>
                
                <div class="card">
                    <h3 class="card-title">Logistics Optimization</h3>
                    <div class="input-group">
                        <label>Manufacturing Location</label>
                        <select id="location" onchange="updateLogistics()">
                            <option value="gujarat">Gujarat (Near Ports)</option>
                            <option value="tamil-nadu">Tamil Nadu (Auto Hub)</option>
                            <option value="karnataka">Karnataka (Tech Hub)</option>
                            <option value="maharashtra">Maharashtra (Industrial)</option>
                        </select>
                    </div>
                    <div id="logisticsResult" class="analysis-result">
                        <p>Optimal location based on proximity to ports, EV manufacturers, and skilled workforce.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Financial Model Tab -->
        <div id="financial" class="tab-content">
            <div class="card">
                <h3 class="card-title">Financial Feasibility Calculator</h3>
                <div class="dashboard-grid">
                    <div class="input-group">
                        <label>Initial Investment (‚Çπ Cr)</label>
                        <input type="number" id="investment" value="1000" oninput="calculateFinancials()">
                    </div>
                    <div class="input-group">
                        <label>Production Capacity (TPA)</label>
                        <input type="number" id="capacity" value="5000" oninput="calculateFinancials()">
                    </div>
                    <div class="input-group">
                        <label>Selling Price (‚Çπ/kg)</label>
                        <input type="number" id="price" value="3000" oninput="calculateFinancials()">
                    </div>
                    <div class="input-group">
                        <label>Operating Cost (‚Çπ/kg)</label>
                        <input type="number" id="cost" value="2200" oninput="calculateFinancials()">
                    </div>
                </div>
                
                <button class="btn" onclick="calculateFinancials()">Calculate Financial Metrics</button>
                
                <div id="financialResults" class="analysis-result" style="margin-top: 20px;">
                    <!-- Financial results will be displayed here -->
                </div>
                
                <div class="chart-container">
                    <canvas id="cashFlowChart"></canvas>
                </div>
            </div>
            
            <div class="dashboard-grid">
                <div class="card">
                    <h3 class="card-title">Key Financial Metrics</h3>
                    <div id="financialMetrics">
                        <div class="metric-value">18.5%</div>
                        <div class="metric-label">Expected IRR</div>
                        <div class="progress-bar" style="margin-top: 10px;">
                            <div class="progress-fill" style="width: 74%;"></div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3 class="card-title">Payback Period</h3>
                    <div class="metric-value">6.2</div>
                    <div class="metric-label">Years</div>
                    <div class="risk-indicator risk-medium">Moderate Risk</div>
                </div>
            </div>
        </div>
        
        <!-- Scenario Analysis Tab -->
        <div id="scenario" class="tab-content">
            <div class="card">
                <h3 class="card-title">Multi-Scenario Simulation</h3>
                <div class="input-group">
                    <label>Select Scenario</label>
                    <select id="scenarioSelect" onchange="runScenario()">
                        <option value="base">Base Case</option>
                        <option value="optimistic">Optimistic (High EV Growth)</option>
                        <option value="pessimistic">Pessimistic (Slow Adoption)</option>
                        <option value="disruption">Technology Disruption</option>
                        <option value="policy">Policy Support Enhanced</option>
                    </select>
                </div>
                
                <div class="dashboard-grid">
                    <div class="input-group">
                        <label>Raw Material Price Volatility (%)</label>
                        <input type="range" class="slider" id="volatility" min="0" max="50" value="20" oninput="runScenario()">
                        <span id="volatilityValue">20%</span>
                    </div>
                    <div class="input-group">
                        <label>Technology Improvement Rate (%/year)</label>
                        <input type="range" class="slider" id="techRate" min="0" max="20" value="5" oninput="runScenario()">
                        <span id="techValue">5%</span>
                    </div>
                </div>
                
                <button class="btn" onclick="runMonteCarloSimulation()">Run Monte Carlo Simulation (1000 iterations)</button>
                
                <div id="scenarioResults" class="analysis-result" style="margin-top: 20px;">
                    <!-- Scenario results will be displayed here -->
                </div>
                
                <div class="chart-container">
                    <canvas id="scenarioChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Risk Assessment Tab -->
        <div id="risk" class="tab-content">
            <div class="card">
                <h3 class="card-title">Comprehensive Risk Matrix</h3>
                <div class="chart-container">
                    <canvas id="riskMatrixChart"></canvas>
                </div>
            </div>
            
            <div class="dashboard-grid">
                <div class="card">
                    <h3 class="card-title">Risk Categories</h3>
                    <div class="analysis-result">
                        <div style="margin-bottom: 15px;">
                            <h4>Supply Chain Risk</h4>
                            <div class="risk-indicator risk-high">High</div>
                            <p style="font-size: 0.9em; margin-top: 5px;">Heavy dependence on rare earth imports</p>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <h4>Market Risk</h4>
                            <div class="risk-indicator risk-medium">Medium</div>
                            <p style="font-size: 0.9em; margin-top: 5px;">EV adoption rate uncertainty</p>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <h4>Technology Risk</h4>
                            <div class="risk-indicator risk-low">Low</div>
                            <p style="font-size: 0.9em; margin-top: 5px;">Established manufacturing processes</p>
                        </div>
                        <div>
                            <h4>Regulatory Risk</h4>
                            <div class="risk-indicator risk-medium">Medium</div>
                            <p style="font-size: 0.9em; margin-top: 5px;">Environmental compliance requirements</p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3 class="card-title">Risk Mitigation Strategies</h3>
                    <ul style="line-height: 1.8; color: #e0e0e0;">
                        <li>Establish long-term contracts with rare earth suppliers</li>
                        <li>Develop recycling capabilities for end-of-life magnets</li>
                        <li>Partner with global technology leaders</li>
                        <li>Diversify customer base across industries</li>
                        <li>Implement robust environmental management systems</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Environmental Impact Tab -->
        <div id="environment" class="tab-content">
            <div class="card">
                <h3 class="card-title">Environmental Impact Assessment</h3>
                <div class="dashboard-grid">
                    <div class="card">
                        <h3 class="card-title">Carbon Footprint</h3>
                        <div class="metric-value">2.8</div>
                        <div class="metric-label">tCO2e per ton NdFeB</div>
                        <div class="chart-container">
                            <canvas id="carbonChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3 class="card-title">Sustainability Metrics</h3>
                        <div class="input-group">
                            <label>Renewable Energy Usage (%)</label>
                            <input type="range" class="slider" id="renewable" min="0" max="100" value="30" oninput="updateEnvironmental()">
                            <span id="renewableValue">30%</span>
                        </div>
                        <div class="input-group">
                            <label>Water Recycling Rate (%)</label>
                            <input type="range" class="slider" id="waterRecycle" min="0" max="100" value="60" oninput="updateEnvironmental()">
                            <span id="waterValue">60%</span>
                        </div>
                        <div id="envResult" class="analysis-result">
                            <p>Environmental Score: <strong style="color: #4caf50;">B+</strong></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Policy Framework Tab -->
        <div id="policy" class="tab-content">
            <div class="card">
                <h3 class="card-title">Government Policy Support Analysis</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Policy/Scheme</th>
                            <th>Benefit Type</th>
                            <th>Quantum</th>
                            <th>Eligibility</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>PLI Scheme (Auto Components)</td>
                            <td>Cash Incentive</td>
                            <td>4-7% of incremental sales</td>
                            <td>Min investment ‚Çπ250 Cr</td>
                        </tr>
                        <tr>
                            <td>FAME II</td>
                            <td>Demand Incentive</td>
                            <td>Indirect through EV subsidies</td>
                            <td>Component suppliers</td>
                        </tr>
                        <tr>
                            <td>State Industrial Policy</td>
                            <td>Capital Subsidy</td>
                            <td>15-25% of fixed capital</td>
                            <td>State-specific criteria</td>
                        </tr>
                        <tr>
                            <td>Export Promotion</td>
                            <td>Duty Drawback</td>
                            <td>2-3% of FOB value</td>
                            <td>Export-oriented units</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="analysis-result" style="margin-top: 20px;">
                    <h4>Policy Impact Score: 7.8/10</h4>
                    <p>Current policy framework provides moderate to strong support for NdFeB manufacturing, with potential total benefits of 20-30% of project cost.</p>
                </div>
            </div>
        </div>
        
        <!-- Future Forecast Tab -->
        <div id="forecast" class="tab-content">
            <div class="card">
                <h3 class="card-title">AI-Powered Future Projections</h3>
                <div class="input-group">
                    <label>Forecast Horizon</label>
                    <select id="forecastHorizon" onchange="updateForecast()">
                        <option value="5">5 Years (2029)</option>
                        <option value="10" selected>10 Years (2034)</option>
                        <option value="15">15 Years (2039)</option>
                    </select>
                </div>
                
                <div class="chart-container">
                    <canvas id="forecastChart"></canvas>
                </div>
                
                <div class="dashboard-grid" style="margin-top: 20px;">
                    <div class="card">
                        <h3 class="card-title">Market Size Projection</h3>
                        <div class="metric-value">‚Çπ42,000 Cr</div>
                        <div class="metric-label">By 2034 (10-year forecast)</div>
                        <div class="risk-indicator risk-low">High Confidence</div>
                    </div>
                    
                    <div class="card">
                        <h3 class="card-title">Technology Evolution</h3>
                        <ul style="line-height: 1.8;">
                            <li>Grain boundary diffusion process adoption: 85%</li>
                            <li>Recycled content in production: 25-30%</li>
                            <li>Energy density improvement: +40%</li>
                            <li>Cost reduction through automation: -35%</li>
                        </ul>
                    </div>
                </div>
                
                <div class="analysis-result">
                    <h4>Strategic Recommendations for 2034:</h4>
                    <ol style="margin-left: 20px; line-height: 1.8;">
                        <li>Establish integrated manufacturing with 15,000+ TPA capacity</li>
                        <li>Develop strategic partnerships with global OEMs</li>
                        <li>Invest in recycling infrastructure for circular economy</li>
                        <li>Focus on high-grade NdFeB for premium EV segment</li>
                        <li>Build R&D capabilities for next-gen magnetic materials</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Global variables for charts
        let charts = {};
        
        // Tab switching functionality
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            const navTabs = document.querySelectorAll('.nav-tab');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            navTabs.forEach(navTab => navTab.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // Initialize charts for the active tab
            initializeTabCharts(tabName);
        }
        
        // Initialize charts based on active tab
        function initializeTabCharts(tabName) {
            switch(tabName) {
                case 'overview':
                    initOverviewChart();
                    break;
                case 'market':
                    initMarketCharts();
                    break;
                case 'supply':
                    initSupplyChainChart();
                    break;
                case 'financial':
                    initFinancialCharts();
                    break;
                case 'scenario':
                    initScenarioChart();
                    break;
                case 'risk':
                    initRiskMatrix();
                    break;
                case 'environment':
                    initEnvironmentalCharts();
                    break;
                case 'forecast':
                    initForecastChart();
                    break;
            }
        }
        
        // Overview Chart
        function initOverviewChart() {
            const ctx = document.getElementById('overviewChart').getContext('2d');
            
            if (charts.overview) charts.overview.destroy();
            
            charts.overview = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['2020', '2021', '2022', '2023', '2024', '2025', '2026', '2027', '2028', '2029', '2030'],
                    datasets: [{
                        label: 'India EV Sales (Million Units)',
                        data: [0.12, 0.23, 0.48, 0.85, 1.3, 2.1, 3.2, 4.8, 6.1, 8.2, 10.5],
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4
                    }, {
                        label: 'NdFeB Demand (Thousand Tons)',
                        data: [2.1, 3.8, 6.2, 9.5, 12.5, 17.0, 22.0, 28.5, 35.0, 40.0, 45.0],
                        borderColor: '#764ba2',
                        backgroundColor: 'rgba(118, 75, 162, 0.1)',
                        tension: 0.4,
                        yAxisID: 'y1'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false
                    },
                    plugins: {
                        legend: {
                            labels: { color: '#e0e0e0' }
                        },
                        title: {
                            display: true,
                            text: 'India EV Market & NdFeB Demand Projection',
                            color: '#e0e0e0',
                            font: { size: 16 }
                        }
                    },
                    scales: {
                        x: {
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: '#e0e0e0' }
                        },
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: '#e0e0e0' },
                            title: {
                                display: true,
                                text: 'EV Sales (Million Units)',
                                color: '#e0e0e0'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            grid: { drawOnChartArea: false },
                            ticks: { color: '#e0e0e0' },
                            title: {
                                display: true,
                                text: 'NdFeB Demand (Thousand Tons)',
                                color: '#e0e0e0'
                            }
                        }
                    }
                }
            });
        }
        
        // Market Charts
        function initMarketCharts() {
            // Market Segmentation Chart
            const segmentCtx = document.getElementById('marketSegmentChart').getContext('2d');
            if (charts.marketSegment) charts.marketSegment.destroy();
            
            charts.marketSegment = new Chart(segmentCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Electric Motors', 'Wind Turbines', 'Consumer Electronics', 'Industrial', 'Others'],
                    datasets: [{
                        data: [45, 25, 15, 10, 5],
                        backgroundColor: [
                            'rgba(102, 126, 234, 0.8)',
                            'rgba(118, 75, 162, 0.8)',
                            'rgba(76, 175, 80, 0.8)',
                            'rgba(255, 193, 7, 0.8)',
                            'rgba(244, 67, 54, 0.8)'
                        ],
                        borderWidth: 2,
                        borderColor: '#302b63'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { color: '#e0e0e0' }
                        },
                        title: {
                            display: true,
                            text: 'NdFeB Application Segments (India)',
                            color: '#e0e0e0',
                            font: { size: 14 }
                        }
                    }
                }
            });
            
            // Competitive Landscape Chart
            const competitiveCtx = document.getElementById('competitiveChart').getContext('2d');
            if (charts.competitive) charts.competitive.destroy();
            
            charts.competitive = new Chart(competitiveCtx, {
                type: 'bar',
                data: {
                    labels: ['China', 'Japan', 'Europe', 'USA', 'India', 'Others'],
                    datasets: [{
                        label: 'Production Capacity (%)',
                        data: [85, 5, 4, 3, 1, 2],
                        backgroundColor: 'rgba(102, 126, 234, 0.7)',
                        borderColor: 'rgba(102, 126, 234, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        title: {
                            display: true,
                            text: 'Global NdFeB Production Share',
                            color: '#e0e0e0',
                            font: { size: 14 }
                        }
                    },
                    scales: {
                        x: {
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: '#e0e0e0' }
                        },
                        y: {
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: '#e0e0e0' },
                            beginAtZero: true
                        }
                    }
                }
            });
        }
        
        // Supply Chain Chart
        function initSupplyChainChart() {
            const ctx = document.getElementById('supplyChainChart').getContext('2d');
            if (charts.supplyChain) charts.supplyChain.destroy();
            
            charts.supplyChain = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Raw Material Security', 'Logistics Efficiency', 'Processing Capability', 'Quality Control', 'Cost Competitiveness', 'Environmental Compliance'],
                    datasets: [{
                        label: 'Current State',
                        data: [3, 6, 4, 7, 5, 6],
                        borderColor: 'rgba(244, 67, 54, 0.8)',
                        backgroundColor: 'rgba(244, 67, 54, 0.2)',
                        pointBackgroundColor: 'rgba(244, 67, 54, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(244, 67, 54, 1)'
                    }, {
                        label: 'Target State (2030)',
                        data: [7, 8, 8, 9, 8, 9],
                        borderColor: 'rgba(76, 175, 80, 0.8)',
                        backgroundColor: 'rgba(76, 175, 80, 0.2)',
                        pointBackgroundColor: 'rgba(76, 175, 80, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(76, 175, 80, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#e0e0e0' }
                        },
                        title: {
                            display: true,
                            text: 'Supply Chain Readiness Assessment',
                            color: '#e0e0e0',
                            font: { size: 16 }
                        }
                    },
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(255, 255, 255, 0.1)' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            pointLabels: { color: '#e0e0e0' },
                            ticks: {
                                color: '#e0e0e0',
                                backdropColor: 'transparent',
                                beginAtZero: true,
                                max: 10
                            }
                        }
                    }
                }
            });
        }
        
        // Financial Charts
        function initFinancialCharts() {
            calculateFinancials();
        }
        
        function calculateFinancials() {
            const investment = parseFloat(document.getElementById('investment').value);
            const capacity = parseFloat(document.getElementById('capacity').value);
            const price = parseFloat(document.getElementById('price').value);
            const cost = parseFloat(document.getElementById('cost').value);
            
            // Calculate financial metrics
            const annualRevenue = (capacity * 1000 * price) / 10000000; // in Cr
            const annualProfit = (capacity * 1000 * (price - cost)) / 10000000; // in Cr
            const roi = (annualProfit / investment) * 100;
            const payback = investment / annualProfit;
            
            // NPV calculation (simplified)
            let npv = -investment;
            for (let i = 1; i <= 10; i++) {
                npv += annualProfit / Math.pow(1.12, i);
            }
            
            // IRR approximation
            const irr = roi * 0.7 + 5; // Simplified calculation
            
            // Update results
            const resultsHtml = `
                <h4>Financial Analysis Results:</h4>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 15px;">
                    <div>
                        <strong>Annual Revenue:</strong> ‚Çπ${annualRevenue.toFixed(1)} Cr
                    </div>
                    <div>
                        <strong>Annual EBITDA:</strong> ‚Çπ${annualProfit.toFixed(1)} Cr
                    </div>
                    <div>
                        <strong>ROI:</strong> ${roi.toFixed(1)}%
                    </div>
                    <div>
                        <strong>Payback Period:</strong> ${payback.toFixed(1)} years
                    </div>
                    <div>
                        <strong>NPV (10 years):</strong> ‚Çπ${npv.toFixed(1)} Cr
                    </div>
                    <div>
                        <strong>Est. IRR:</strong> ${irr.toFixed(1)}%
                    </div>
                </div>
                <div style="margin-top: 15px;">
                    <strong>Feasibility Rating:</strong> 
                    <span class="risk-indicator ${npv > 0 ? 'risk-low' : 'risk-high'}">
                        ${npv > 0 ? 'Financially Viable' : 'Needs Optimization'}
                    </span>
                </div>
            `;
            
            document.getElementById('financialResults').innerHTML = resultsHtml;
            
            // Update cash flow chart
            updateCashFlowChart(investment, annualProfit);
        }
        
        function updateCashFlowChart(investment, annualProfit) {
            const ctx = document.getElementById('cashFlowChart').getContext('2d');
            
            if (charts.cashFlow) charts.cashFlow.destroy();
            
            const years = [];
            const cashFlows = [];
            let cumulative = -investment;
            
            for (let i = 0; i <= 10; i++) {
                years.push(`Year ${i}`);
                if (i === 0) {
                    cashFlows.push(-investment);
                } else {
                    cumulative += annualProfit;
                    cashFlows.push(cumulative);
                }
            }
            
            charts.cashFlow = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: years,
                    datasets: [{
                        label: 'Cumulative Cash Flow (‚Çπ Cr)',
                        data: cashFlows,
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#e0e0e0' }
                        },
                        title: {
                            display: true,
                            text: 'Projected Cash Flow Analysis',
                            color: '#e0e0e0',
                            font: { size: 16 }
                        }
                    },
                    scales: {
                        x: {
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: '#e0e0e0' }
                        },
                        y: {
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: '#e0e0e0' },
                            title: {
                                display: true,
                                text: 'Cash Flow (‚Çπ Cr)',
                                color: '#e0e0e0'
                            }
                        }
                    }
                }
            });
        }
        
        // Scenario Analysis
        function initScenarioChart() {
            runScenario();
        }
        
        function runScenario() {
            const scenario = document.getElementById('scenarioSelect').value;
            const volatility = document.getElementById('volatility').value;
            const techRate = document.getElementById('techRate').value;
            
            document.getElementById('volatilityValue').textContent = volatility + '%';
            document.getElementById('techValue').textContent = techRate + '%';
            
            // Generate scenario data
            const scenarioData = generateScenarioData(scenario, volatility, techRate);
            
            // Update scenario chart
            const ctx = document.getElementById('scenarioChart').getContext('2d');
            if (charts.scenario) charts.scenario.destroy();
            
            charts.scenario = new Chart(ctx, {
                type: 'line',
                data: scenarioData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false
                    },
                    plugins: {
                        legend: {
                            labels: { color: '#e0e0e0' }
                        },
                        title: {
                            display: true,
                            text: 'Scenario Analysis - NPV Projections',
                            color: '#e0e0e0',
                            font: { size: 16 }
                        }
                    },
                    scales: {
                        x: {
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: '#e0e0e0' }
                        },
                        y: {
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: '#e0e0e0' },
                            title: {
                                display: true,
                                text: 'NPV (‚Çπ Cr)',
                                color: '#e0e0e0'
                            }
                        }
                    }
                }
            });
            
            // Update scenario results
            updateScenarioResults(scenario);
        }
        
        function generateScenarioData(scenario, volatility, techRate) {
            const years = ['Year 1', 'Year 2', 'Year 3', 'Year 4', 'Year 5', 'Year 6', 'Year 7', 'Year 8', 'Year 9', 'Year 10'];
            const datasets = [];
            
            // Base case
            const baseNPV = years.map((_, i) => -800 + (i + 1) * 150);
            datasets.push({
                label: 'Base Case',
                data: baseNPV,
                borderColor: '#667eea',
                backgroundColor: 'rgba(102, 126, 234, 0.1)',
                tension: 0.4
            });
            
            // Selected scenario
            let scenarioMultiplier = 1;
            switch(scenario) {
                case 'optimistic': scenarioMultiplier = 1.3; break;
                case 'pessimistic': scenarioMultiplier = 0.7; break;
                case 'disruption': scenarioMultiplier = 0.5; break;
                case 'policy': scenarioMultiplier = 1.2; break;
            }
            
            const scenarioNPV = baseNPV.map(v => v * scenarioMultiplier * (1 - volatility/200) * (1 + techRate/100));
            datasets.push({
                label: 'Selected Scenario',
                data: scenarioNPV,
                borderColor: '#f44336',
                backgroundColor: 'rgba(244, 67, 54, 0.1)',
                tension: 0.4
            });
            
            return { labels: years, datasets };
        }
        
        function updateScenarioResults(scenario) {
            const results = {
                'base': {
                    npv: '‚Çπ850 Cr',
                    irr: '18.5%',
                    risk: 'Medium',
                    recommendation: 'Proceed with standard risk mitigation measures'
                },
                'optimistic': {
                    npv: '‚Çπ1,250 Cr',
                    irr: '24.2%',
                    risk: 'Low',
                    recommendation: 'Accelerate capacity expansion plans'
                },
                'pessimistic': {
                    npv: '‚Çπ450 Cr',
                    irr: '12.8%',
                    risk: 'High',
                    recommendation: 'Phase implementation and secure long-term contracts'
                },
                'disruption': {
                    npv: '‚Çπ-150 Cr',
                    irr: '6.5%',
                    risk: 'Very High',
                    recommendation: 'Delay investment until technology stabilizes'
                },
                'policy': {
                    npv: '‚Çπ1,050 Cr',
                    irr: '21.3%',
                    risk: 'Low-Medium',
                    recommendation: 'Leverage government incentives aggressively'
                }
            };
            
            const result = results[scenario];
            document.getElementById('scenarioResults').innerHTML = `
                <h4>Scenario Analysis Results:</h4>
                <div style="margin-top: 15px;">
                    <p><strong>Expected NPV:</strong> ${result.npv}</p>
                    <p><strong>Expected IRR:</strong> ${result.irr}</p>
                    <p><strong>Risk Level:</strong> <span class="risk-indicator risk-${result.risk.toLowerCase().replace(' ', '-')}">${result.risk}</span></p>
                    <p><strong>Strategic Recommendation:</strong> ${result.recommendation}</p>
                </div>
            `;
        }
        
        function runMonteCarloSimulation() {
            // Simulate Monte Carlo analysis
            alert('Running 1000 iterations of Monte Carlo simulation...\n\nResults:\n- Mean NPV: ‚Çπ823 Cr\n- Standard Deviation: ‚Çπ245 Cr\n- Probability of Positive NPV: 87.3%\n- Value at Risk (95%): ‚Çπ412 Cr');
        }
        
        // Risk Matrix
        function initRiskMatrix() {
            const ctx = document.getElementById('riskMatrixChart').getContext('2d');
            if (charts.riskMatrix) charts.riskMatrix.destroy();
            
            charts.riskMatrix = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Risk Factors',
                        data: [
                            {x: 8, y: 9, label: 'Raw Material Supply'},
                            {x: 6, y: 7, label: 'Market Demand'},
                            {x: 4, y: 6, label: 'Technology'},
                            {x: 7, y: 5, label: 'Regulatory'},
                            {x: 5, y: 8, label: 'Competition'},
                            {x: 3, y: 4, label: 'Operational'},
                            {x: 6, y: 6, label: 'Financial'},
                            {x: 7, y: 4, label: 'Environmental'}
                        ],
                        backgroundColor: function(context) {
                            const value = context.parsed;
                            const impact = value.x * value.y;
                            if (impact > 50) return 'rgba(244, 67, 54, 0.8)';
                            if (impact > 25) return 'rgba(255, 193, 7, 0.8)';
                            return 'rgba(76, 175, 80, 0.8)';
                        },
                        pointRadius: 10,
                        pointHoverRadius: 12
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        title: {
                            display: true,
                            text: 'Risk Assessment Matrix',
                            color: '#e0e0e0',
                            font: { size: 16 }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.raw.label + ': Impact=' + context.parsed.x + ', Probability=' + context.parsed.y;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Impact (1-10)',
                                color: '#e0e0e0'
                            },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: '#e0e0e0' },
                            min: 0,
                            max: 10
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Probability (1-10)',
                                color: '#e0e0e0'
                            },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: '#e0e0e0' },
                            min: 0,
                            max: 10
                        }
                    }
                }
            });
        }
        
        // Environmental Charts
        function initEnvironmentalCharts() {
            const ctx = document.getElementById('carbonChart').getContext('2d');
            if (charts.carbon) charts.carbon.destroy();
            
            charts.carbon = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Mining', 'Processing', 'Manufacturing', 'Transport', 'End-of-Life'],
                    datasets: [{
                        label: 'Carbon Emissions (tCO2e/ton)',
                        data: [0.8, 1.2, 0.5, 0.2, 0.1],
                        backgroundColor: [
                            'rgba(244, 67, 54, 0.7)',
                            'rgba(255, 152, 0, 0.7)',
                            'rgba(255, 193, 7, 0.7)',
                            'rgba(76, 175, 80, 0.7)',
                            'rgba(0, 150, 136, 0.7)'
                        ],
                        borderColor: [
                            'rgba(244, 67, 54, 1)',
                            'rgba(255, 152, 0, 1)',
                            'rgba(255, 193, 7, 1)',
                            'rgba(76, 175, 80, 1)',
                            'rgba(0, 150, 136, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        title: {
                            display: true,
                            text: 'Carbon Footprint Breakdown',
                            color: '#e0e0e0',
                            font: { size: 14 }
                        }
                    },
                    scales: {
                        x: {
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: '#e0e0e0' }
                        },
                        y: {
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: '#e0e0e0' },
                            beginAtZero: true
                        }
                    }
                }
            });
        }
        
        function updateEnvironmental() {
            const renewable = document.getElementById('renewable').value;
            const waterRecycle = document.getElementById('waterRecycle').value;
            
            document.getElementById('renewableValue').textContent = renewable + '%';
            document.getElementById('waterValue').textContent = waterRecycle + '%';
            
            // Calculate environmental score
            const score = (parseFloat(renewable) + parseFloat(waterRecycle)) / 20;
            let grade = 'C';
            if (score > 8) grade = 'A';
            else if (score > 6) grade = 'B+';
            else if (score > 4) grade = 'B';
            
            document.getElementById('envResult').innerHTML = `
                <p>Environmental Score: <strong style="color: ${score > 6 ? '#4caf50' : '#ffc107'};">${grade}</strong></p>
                <p>Carbon reduction potential: ${(renewable * 0.02).toFixed(1)}%</p>
            `;
        }
        
        // Forecast Chart
        function initForecastChart() {
            updateForecast();
        }
        
        function updateForecast() {
            const horizon = parseInt(document.getElementById('forecastHorizon').value);
            const ctx = document.getElementById('forecastChart').getContext('2d');
            
            if (charts.forecast) charts.forecast.destroy();
            
            // Generate forecast data using exponential growth model
            const years = [];
            const demand = [];
            const production = [];
            const price = [];
            
            for (let i = 0; i <= horizon; i++) {
                years.push(2024 + i);
                demand.push(12.5 * Math.pow(1.15, i)); // 15% CAGR
                production.push(1 * Math.pow(1.25, i)); // 25% CAGR for domestic production
                price.push(3000 * Math.pow(0.97, i)); // 3% annual price reduction
            }
            
            charts.forecast = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: years,
                    datasets: [{
                        label: 'Total Demand (Thousand Tons)',
                        data: demand,
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4,
                        yAxisID: 'y'
                    }, {
                        label: 'Domestic Production (Thousand Tons)',
                        data: production,
                        borderColor: '#4caf50',
                        backgroundColor: 'rgba(76, 175, 80, 0.1)',
                        tension: 0.4,
                        yAxisID: 'y'
                    }, {
                        label: 'Price (‚Çπ/kg)',
                        data: price,
                        borderColor: '#ffc107',
                        backgroundColor: 'rgba(255, 193, 7, 0.1)',
                        tension: 0.4,
                        yAxisID: 'y1'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false
                    },
                    plugins: {
                        legend: {
                            labels: { color: '#e0e0e0' }
                        },
                        title: {
                            display: true,
                            text: `NdFeB Market Forecast (${horizon}-Year Horizon)`,
                            color: '#e0e0e0',
                            font: { size: 16 }
                        }
                    },
                    scales: {
                        x: {
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: '#e0e0e0' }
                        },
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: '#e0e0e0' },
                            title: {
                                display: true,
                                text: 'Volume (Thousand Tons)',
                                color: '#e0e0e0'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            grid: { drawOnChartArea: false },
                            ticks: { color: '#e0e0e0' },
                            title: {
                                display: true,
                                text: 'Price (‚Çπ/kg)',
                                color: '#e0e0e0'
                            }
                        }
                    }
                }
            });
        }
        
        // Update functions for interactive elements
        function updateMarketAnalysis() {
            const growthRate = document.getElementById('evGrowthRate').value;
            document.getElementById('evGrowthValue').textContent = growthRate + '%';
            
            // Recalculate market opportunity
            const baseScore = 8.2;
            const adjustedScore = baseScore * (1 + (growthRate - 25) / 100);
            
            document.getElementById('marketAnalysisResult').innerHTML = `
                <h4>Market Opportunity Score: <span style="color: ${adjustedScore > 7 ? '#4caf50' : '#ffc107'};">${adjustedScore.toFixed(1)}/10</span></h4>
                <p>Based on current parameters, the Indian NdFeB market presents a ${adjustedScore > 7 ? 'strong' : 'moderate'} opportunity with projected demand of ${(35 * (growthRate / 25)).toFixed(0)},000 tons by 2028.</p>
            `;
        }
        
        function updateLogistics() {
            const location = document.getElementById('location').value;
            const locationScores = {
                'gujarat': { score: 8.5, reason: 'Excellent port connectivity and industrial infrastructure' },
                'tamil-nadu': { score: 9.0, reason: 'Proximity to major auto manufacturers and established ecosystem' },
                'karnataka': { score: 7.5, reason: 'Strong R&D capabilities and skilled workforce' },
                'maharashtra': { score: 8.0, reason: 'Large industrial base and central location' }
            };
            
            const data = locationScores[location];
            document.getElementById('logisticsResult').innerHTML = `
                <p><strong>Location Score: ${data.score}/10</strong></p>
                <p>${data.reason}</p>
                <p>Estimated logistics cost advantage: ${(10 - data.score) * 2}% over average</p>
            `;
        }
        
        // Initialize the first tab on load
        window.onload = function() {
            initOverviewChart();
        };
    </script>
</body>
</html>